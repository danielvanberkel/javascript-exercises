<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>
    <div>
        <h1>The computer chose: <span id="computer-choice-label"></span></h1>
        <h3>What is your choice?</h3>
    </div>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>

    <div>
        <p>Your score: <span id="user-score-label"></span></p>
        <p>Computer score: <span id="computer-score-label"></span></p>
    </div>


     <script>
        function updateUserScore() {
            userScore += 1;
            userScoreLabel.textContent = userScore;

            if (userScore >= 5) {
                alert("The winner is YOU!")
                resetScores();
            }
        }

        function updateComputerScore() {
            computerScore += 1;
            computerScoreLabel.textContent = computerScore;

            if (computerScore >= 5) {
                alert("The winner is the computer.")
                resetScores();
            }
        }

        function resetScores() {
            userScore = 0;
            computerScore = 0;
            computerSelection = getComputerChoice();
            userScoreLabel.textContent = userScore;
            computerScoreLabel.textContent = computerScore;
            computerChoiceLabel.textContent = computerSelection;
        }

        function playRound(playerSelection) {
            const ROCK = "Rock";
            const PAPER = "Paper";
            const SCISSORS = "Scissors";

            // Rock beats Scissors
            if (computerSelection === ROCK && playerSelection === SCISSORS) {
                updateComputerScore();
            } else if (playerSelection === ROCK && computerSelection === SCISSORS) {
                updateUserScore();
            }
            // Paper beats Rock
            if (computerSelection === PAPER && playerSelection === ROCK) {
                updateComputerScore();
            } else if (playerSelection === PAPER && computerSelection === ROCK) {
                updateUserScore();
            }
            // Scissors beats Paper
            if (computerSelection === SCISSORS && playerSelection === PAPER) {
                updateComputerScore();
            } else if (playerSelection === SCISSORS && computerSelection === PAPER) {
                updateUserScore();
            }

            // Set new computer choice for next round
            computerSelection = getComputerChoice();
            computerChoiceLabel.textContent = computerSelection;
        }

        const choices = ["Rock", "Paper", "Scissors"];
        let computerSelection = getComputerChoice();
        
        let userScore = 0;
        let computerScore = 0;

        function getComputerChoice() {
            let index = Math.floor(Math.random() * 3)
            return choices[index]
        }

        const buttons = document.querySelectorAll("button");

        buttons.forEach(button => {
            button.addEventListener("click", (event) => {
                
                if (Math.max(userScore, computerScore) < 5) {
                    playRound(event.target.innerText);
                } else {
                    alert(`The winner is ${userScore > computerScore ? "YOU!" : "the computer"}`)
                }
            });
        });

        const computerChoiceLabel = document.querySelector("#computer-choice-label");
        computerChoiceLabel.textContent = computerSelection;

        const userScoreLabel = document.querySelector("#user-score-label");
        userScoreLabel.textContent = userScore;

        const computerScoreLabel = document.querySelector("#computer-score-label");
        computerScoreLabel.textContent = computerScore;

    </script>
</body>
</html>